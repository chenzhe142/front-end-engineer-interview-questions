
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Performance Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-api/theme-api.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../system_design/system-design-frontend.html" />
    
    
    <link rel="prev" href="rendering.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">JavaScript</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../javascript/javascript.html">
            
                <a href="../javascript/javascript.html">
            
                    
                    Overall Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    ECMAScript
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../javascript/ECMAScript/1_fundamentals.html">
            
                <a href="../javascript/ECMAScript/1_fundamentals.html">
            
                    
                    Fundamentals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../javascript/ECMAScript/2_variable-scope-memory.html">
            
                <a href="../javascript/ECMAScript/2_variable-scope-memory.html">
            
                    
                    Variable, Scope, and Memory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../javascript/ECMAScript/3_reference-types.html">
            
                <a href="../javascript/ECMAScript/3_reference-types.html">
            
                    
                    Reference Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../javascript/ECMAScript/4_natives.html">
            
                <a href="../javascript/ECMAScript/4_natives.html">
            
                    
                    Natives
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../javascript/ECMAScript/5_object_oriented_programming.md">
            
                <span>
            
                    
                    Object-oriented programming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../javascript/ECMAScript/function.html">
            
                <a href="../javascript/ECMAScript/function.html">
            
                    
                    Function
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    DOM
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../javascript/DOM/history.html">
            
                <a href="../javascript/DOM/history.html">
            
                    
                    Version change & history
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../javascript/DOM/use-Javascript-in-HTML.html">
            
                <a href="../javascript/DOM/use-Javascript-in-HTML.html">
            
                    
                    Use JavaScript in HTML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../javascript/DOM/DOM-api.html">
            
                <a href="../javascript/DOM/DOM-api.html">
            
                    
                    DOM API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../javascript/DOM/DOM-manipulation.html">
            
                <a href="../javascript/DOM/DOM-manipulation.html">
            
                    
                    DOM Manipulation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    BOM
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../javascript/BOM/what-is-BOM.html">
            
                <a href="../javascript/BOM/what-is-BOM.html">
            
                    
                    What is BOM
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">CSS</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../css/elements.html">
            
                <a href="../css/elements.html">
            
                    
                    Elements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../css/position.html">
            
                <a href="../css/position.html">
            
                    
                    Position
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../css/selectors.html">
            
                <a href="../css/selectors.html">
            
                    
                    Selectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../css/specificity.html">
            
                <a href="../css/specificity.html">
            
                    
                    Specificity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../css/flexbox-layout.html">
            
                <a href="../css/flexbox-layout.html">
            
                    
                    Flexbox layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../css/float-layout/md">
            
                <span>
            
                    
                    Float layout
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">HTML</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../html/html.html">
            
                <a href="../html/html.html">
            
                    
                    Semantic tags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../html/accessibility.html">
            
                <a href="../html/accessibility.html">
            
                    
                    Accessibility
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../html/tricks-learnings.html">
            
                <a href="../html/tricks-learnings.html">
            
                    
                    tricks & learnings
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Web Practical Questions</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="rendering.html">
            
                <a href="rendering.html">
            
                    
                    Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.2" data-path="performance.html">
            
                <a href="performance.html">
            
                    
                    Performance
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Front-end Tools</li>
        
        
    

    
        
        <li class="header">System Design</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../system_design/system-design-frontend.html">
            
                <a href="../system_design/system-design-frontend.html">
            
                    
                    Front-end
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="../system_design/system-design-backend.html">
            
                <a href="../system_design/system-design-backend.html">
            
                    
                    Back-end
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../cs_fundamentals/design_patterns/designPattern.html">
            
                <a href="../cs_fundamentals/design_patterns/designPattern.html">
            
                    
                    Design Patterns
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.3.1" data-path="../cs_fundamentals/design_patterns/JavaScript_DesignPattern.html">
            
                <a href="../cs_fundamentals/design_patterns/JavaScript_DesignPattern.html">
            
                    
                    JavaScript Design Patterns
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="../system_design/my-approach.html">
            
                <a href="../system_design/my-approach.html">
            
                    
                    My approach
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">CS Fundamentals</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../cs_fundamentals/algorithm/leetcode.html">
            
                <a href="../cs_fundamentals/algorithm/leetcode.html">
            
                    
                    Algorithms
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" >
            
                <span>
            
                    
                    Sort
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1.1" data-path="../cs_fundamentals/algorithm/sort/heapSort.html">
            
                <a href="../cs_fundamentals/algorithm/sort/heapSort.html">
            
                    
                    Heap sort
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.1.1.2" data-path="../cs_fundamentals/algorithm/sort/quicksort.html">
            
                <a href="../cs_fundamentals/algorithm/sort/quicksort.html">
            
                    
                    Quicksort
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Study Resources</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../study_resources/study-resources.html">
            
                <a href="../study_resources/study-resources.html">
            
                    
                    Books & blogs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../study_resources/source-code-to-read/readlist.html">
            
                <a href="../study_resources/source-code-to-read/readlist.html">
            
                    
                    Source code to read
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">é¢è¯ç»éª</li>
        
        
    
        <li class="chapter " data-level="9.1" >
            
                <span>
            
                    
                    Facebook
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="9.2" >
            
                <span>
            
                    
                    Google
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="9.3" >
            
                <span>
            
                    
                    LinkedIn
            
                </span>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Performance</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="dealing-with-pragmatic-issues">Dealing with pragmatic issues</h1>
<ul>
<li><a href="#javascript">JavaScript tricks</a></li>
<li><a href="#web-performance">Web Performance</a></li>
<li><a href="#lazy-loading">lazy-loading</a></li>
<li><a href="#throttle">throttle</a></li>
<li><a href="#debounce">debounce</a></li>
<li><a href="#reflow">reflow</a></li>
<li><a href="#repaint">repaint</a></li>
</ul>
<h2 id="javascript">JavaScript</h2>
<ol>
<li>access&#x4E00;&#x4E2A;object&#x4E2D;&#x7684;key&#x9700;&#x8981;<code>O(n)</code></li>
<li>access a value in array by index&#x9700;&#x8981;<code>O(1)</code></li>
</ol>
<h2 id="web-performance">Web Performance</h2>
<p>In addition to general programming best practices, you should expect for interviewers to look at your code or design and its performance implications. It used to be enough to put CSS at the top of a document and JS scripts at the bottom of a page but the web is moving fast and you should be familiar with the complexities in this space.</p>
<ul>
<li>Critical rendering path.</li>
<li>Service workers.</li>
<li>Image optimizations.</li>
<li>Lazy loading and bundle splitting.</li>
<li>General implications of HTTP/2 and server-push.</li>
<li>When to prefetch and preload resources.</li>
<li>Reduce browser reflows and when to promote an element to the GPU.</li>
<li>Differences between the browser layout, compositing and painting.</li>
</ul>
<h2 id="lazy-loading">lazy-loading</h2>
<p>&#x672C;&#x7AE0;&#x8282;&#x6458;&#x81EA;&#x6587;&#x7AE0;&#xFF1A;<a href="https://www.denpe.com/javascript-images-lazyload/" target="_blank">&#x5B66;&#x4E60;&#x539F;&#x751F;JS&#x5EF6;&#x65F6;&#x52A0;&#x8F7D;</a></p>
<ol>
<li><p>&#x57FA;&#x672C;&#x539F;&#x7406;</p>
<ul>
<li>&#x6B63;&#x5E38;&#x7F51;&#x9875;&#x9875;&#x9762;&#x7ED3;&#x6784;&#xFF1A;&#x5934;&#x90E8;CSS&#x6837;&#x5F0F;&#x548C;&#x5C11;&#x91CF;JS&#xFF1B;&#x4E2D;&#x95F4;&#x90E8;&#x5206;&#x662F;&#x5185;&#x5BB9;&#xFF0C;&#x5305;&#x62EC;&#x56FE;&#x7247;&#x3001;&#x89C6;&#x9891;&#x3001;&#x6587;&#x672C;&#x7B49;&#xFF1B;&#x5E95;&#x90E8;&#x4E3B;&#x8981;JS&#x6587;&#x4EF6;&#x3002;</li>
<li>&#x6D4F;&#x89C8;&#x5668;&#x6253;&#x5F00;&#x7F51;&#x9875;&#x65F6;&#x8FD9;&#x4E9B;&#x8D44;&#x6E90;&#x6309;&#x987A;&#x5E8F;&#x4ECE;&#x524D;&#x5230;&#x540E;&#x9010;&#x4E00;&#x52A0;&#x8F7D;&#xFF0C;&#x800C;&#x5927;&#x591A;&#x9875;&#x9762;&#x90FD;&#x65E0;&#x6CD5;&#x4E00;&#x5C4F;&#x663E;&#x793A;&#x5B8C;&#x5168;&#x3002;</li>
<li>&#x5982;&#x679C;&#x521D;&#x6B21;&#x6253;&#x5F00;&#x9875;&#x9762;&#x65F6;&#x8BA9;&#x6D4F;&#x89C8;&#x5668;&#x53EA;&#x52A0;&#x8F7D;&#x53EF;&#x89C6;&#x533A;&#x57DF;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x4E0D;&#x52A0;&#x8F7D;&#x5F53;&#x524D;&#x4E0D;&#x53EF;&#x89C1;&#x56FE;&#x7247;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x628A;&#x4E0B;&#x8F7D;&#x770B;&#x4E0D;&#x89C1;&#x56FE;&#x7247;&#x7684;&#x65F6;&#x95F4;&#x7528;&#x6765;&#x4E0B;&#x8F7D;&#x9875;&#x9762;&#x540E;&#x9762;&#x7684;js&#x7B49;&#x5185;&#x5BB9;&#xFF0C;&#x5927;&#x5927;&#x63D0;&#x9AD8;&#x9875;&#x9762;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x3002;</li>
<li>&#x5F53;&#x9F20;&#x6807;&#x50CF;&#x4E0B;&#x6EDA;&#x52A8;&#x6D4F;&#x89C8;&#x5668;&#x65F6;&#xFF0C;&#x518D;&#x6309;&#x9700;&#x52A0;&#x8F7D;&#x51FA;&#x73B0;&#x5728;&#x53EF;&#x89C6;&#x533A;&#x7684;&#x56FE;&#x7247;&#x3002;</li>
</ul>
</li>
<li><p>&#x65B9;&#x6CD5;
<img src="https://www.denpe.com/content/images/2016/01/imglazyload.png" alt="lazy-loading"></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> getTopOffset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
 <span class="hljs-keyword">let</span> offset = <span class="hljs-number">0</span>;

 <span class="hljs-keyword">while</span> (element.offsetParent) {
   offset += element.offsetTop;
   element = element.offsetParent;
 }

 <span class="hljs-keyword">return</span> offset;
}

<span class="hljs-keyword">const</span> img = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&apos;img&apos;</span>)[<span class="hljs-number">0</span>];

<span class="hljs-keyword">if</span> (img.offsetTop &lt;= <span class="hljs-built_in">document</span>.body.scrollTop + <span class="hljs-built_in">window</span>.innerHeight) {
 img.src = img.dataset.imgSrc;
}
</code></pre>
<p>jQuery&apos;s implementation of calculating offset:</p>
<p><code>&#x5230;viewport top&#x7684;offset + window.scrollTop = total top offset</code></p>
<pre><code class="lang-javascript">rect = elem.getBoundingClientRect();

 doc = elem.ownerDocument;
 docElem = doc.documentElement;
 win = doc.defaultView;

 <span class="hljs-keyword">return</span> {
     top: rect.top + win.pageYOffset - docElem.clientTop,
     left: rect.left + win.pageXOffset - docElem.clientLeft
 };
</code></pre>
</li>
</ol>
<h2 id="infinite-scrolling--loading">infinite scrolling &amp; loading</h2>
<p>&#x672C;&#x7AE0;&#x8282;&#x6458;&#x81EA;<a href="https://segmentfault.com/a/1190000008730771" target="_blank">JS+HTML&#x5B9E;&#x73B0;&#x5217;&#x8868;&#x52A8;&#x6001;&#x65E0;&#x9650;&#x6EDA;&#x52A8;</a></p>
<h2 id="throttle"><code>throttle</code></h2>
<p>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x8BF4;&#x7684;throttle&#x5C31;&#x662F;&#x51FD;&#x6570;&#x8282;&#x6D41;&#x7684;&#x610F;&#x601D;&#x3002;&#x518D;&#x8BF4;&#x7684;&#x901A;&#x4FD7;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x7684;&#x9891;&#x5EA6;&#x63A7;&#x5236;&#x5668;&#xFF0C;&#x662F;&#x8FDE;&#x7EED;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x63A7;&#x5236;&#x3002;&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x7684;&#x573A;&#x666F;&#x6BD4;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x9F20;&#x6807;&#x79FB;&#x52A8;&#xFF0C;mousemove &#x4E8B;&#x4EF6;</li>
<li>DOM &#x5143;&#x7D20;&#x52A8;&#x6001;&#x5B9A;&#x4F4D;&#xFF0C;window&#x5BF9;&#x8C61;&#x7684;resize&#x548C;scroll &#x4E8B;&#x4EF6;</li>
</ul>
<p>&#x6709;&#x4EBA;&#x5F62;&#x8C61;&#x7684;&#x628A;&#x4E0A;&#x9762;&#x8BF4;&#x7684;&#x4E8B;&#x4EF6;&#x5F62;&#x8C61;&#x7684;&#x6BD4;&#x55BB;&#x6210;&#x673A;&#x5173;&#x67AA;&#x7684;&#x626B;&#x5C04;&#xFF0C;throttle&#x5C31;&#x662F;&#x673A;&#x5173;&#x67AA;&#x7684;&#x6273;&#x673A;&#xFF0C;&#x4F60;&#x4E0D;&#x653E;&#x6273;&#x673A;&#xFF0C;&#x5B83;&#x5C31;&#x4E00;&#x76F4;&#x626B;&#x5C04;&#x3002;&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x65F6;&#x7528;&#x7684;&#x4E0A;&#x9762;&#x8FD9;&#x4E9B;&#x4E8B;&#x4EF6;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x4F60;&#x4E0D;&#x677E;&#x5F00;&#x9F20;&#x6807;&#xFF0C;&#x5B83;&#x7684;&#x4E8B;&#x4EF6;&#x5C31;&#x4E00;&#x76F4;&#x89E6;&#x53D1;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>(<span class="hljs-params">fn, threshhold, scope</span>) </span>{
  threshhold || (threshhold = <span class="hljs-number">250</span>);
  <span class="hljs-keyword">var</span> last,
      deferTimer;
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> context = scope || <span class="hljs-keyword">this</span>;

    <span class="hljs-keyword">var</span> now = +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>,
        args = <span class="hljs-built_in">arguments</span>;
    <span class="hljs-keyword">if</span> (last &amp;&amp; now &lt; last + threshhold) {
      <span class="hljs-comment">// hold on to it</span>
      clearTimeout(deferTimer);
      deferTimer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        last = now;
        fn.apply(context, args);
      }, threshhold);
    } <span class="hljs-keyword">else</span> {
      last = now;
      fn.apply(context, args);
    }
  };
}
</code></pre>
<pre><code class="lang-javascript"><span class="hljs-comment">/*
* &#x9891;&#x7387;&#x63A7;&#x5236; &#x8FD4;&#x56DE;&#x51FD;&#x6570;&#x8FDE;&#x7EED;&#x8C03;&#x7528;&#x65F6;&#xFF0C;fn &#x6267;&#x884C;&#x9891;&#x7387;&#x9650;&#x5B9A;&#x4E3A;&#x6BCF;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#x6267;&#x884C;&#x4E00;&#x6B21;
* @param fn {function}  &#x9700;&#x8981;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;
* @param delay  {number}    &#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x6BEB;&#x79D2;
* @param immediate  {bool} &#x7ED9; immediate&#x53C2;&#x6570;&#x4F20;&#x9012;false &#x7ED1;&#x5B9A;&#x7684;&#x51FD;&#x6570;&#x5148;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;delay&#x540E;&#x540E;&#x6267;&#x884C;&#x3002;
* @return {function}&#x5B9E;&#x9645;&#x8C03;&#x7528;&#x51FD;&#x6570;
*/</span>
<span class="hljs-keyword">var</span> throttle = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn,delay, immediate, debounce</span>) </span>{
   <span class="hljs-keyword">var</span> curr = +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),<span class="hljs-comment">//&#x5F53;&#x524D;&#x4E8B;&#x4EF6;</span>
       last_call = <span class="hljs-number">0</span>,
       last_exec = <span class="hljs-number">0</span>,
       timer = <span class="hljs-literal">null</span>,
       diff, <span class="hljs-comment">//&#x65F6;&#x95F4;&#x5DEE;</span>
       context,<span class="hljs-comment">//&#x4E0A;&#x4E0B;&#x6587;</span>
       args,
       exec = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
           last_exec = curr;
           fn.apply(context, args);
       };
   <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
       curr= +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
       context = <span class="hljs-keyword">this</span>,
       args = <span class="hljs-built_in">arguments</span>,
       diff = curr - (debounce ? last_call : last_exec) - delay;
       clearTimeout(timer);
       <span class="hljs-keyword">if</span> (debounce) {
           <span class="hljs-keyword">if</span> (immediate) {
               timer = setTimeout(exec, delay);
           } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (diff &gt;= <span class="hljs-number">0</span>) {
               exec();
           }
       } <span class="hljs-keyword">else</span> {
           <span class="hljs-keyword">if</span> (diff &gt;= <span class="hljs-number">0</span>) {
               exec();
           } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (immediate) {
               timer = setTimeout(exec, -diff);
           }
       }
       last_call = curr;
   }
};
</code></pre>
<h2 id="debounce"><code>debounce</code></h2>
<p>debounce&#x548C;throttle&#x5F88;&#x50CF;&#xFF0C;debounce&#x662F;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x5FC5;&#x987B;&#x5927;&#x4E8E;&#x6216;&#x7B49;&#x4E8E; &#x4E00;&#x5B9A;&#x503C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x624D;&#x4F1A;&#x6267;&#x884C;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x3002;</p>
<p>debounce&#x662F;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x7684;&#x95F4;&#x9694;&#x63A7;&#x5236;&#x3002;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x505A;autocomplete&#xFF0C;&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x5F88;&#x597D;&#x7684;&#x63A7;&#x5236;&#x8F93;&#x5165;&#x6587;&#x5B57;&#x65F6;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x3002;&#x4E00;&#x822C;&#x65F6;&#x7B2C;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x7684;&#x5B57;&#x7B26;&#x9A6C;&#x4E0A;&#x5F00;&#x59CB;&#x8C03;&#x7528;&#xFF0C;&#x6839;&#x636E;&#x4E00;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x91CD;&#x590D;&#x8C03;&#x7528;&#x6267;&#x884C;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5BF9;&#x4E8E;&#x53D8;&#x6001;&#x7684;&#x8F93;&#x5165;&#xFF0C;&#x6BD4;&#x5982;&#x6309;&#x4F4F;&#x67D0;&#x4E00;&#x4E2A;&#x5EFA;&#x4E0D;&#x653E;&#x7684;&#x65F6;&#x5019;&#x7279;&#x522B;&#x6709;&#x7528;&#x3002;</p>
<p>debounce&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x7684;&#x573A;&#x666F;&#x6BD4;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x6587;&#x672C;&#x8F93;&#x5165;keydown &#x4E8B;&#x4EF6;&#xFF0C;keyup &#x4E8B;&#x4EF6;&#xFF0C;&#x4F8B;&#x5982;&#x505A;autocomplete</li>
</ul>
<p>&#x7B97;&#x6CD5;&#xFF1A;</p>
<ol>
<li>check if there&apos;s already scheduled task</li>
<li>if so, cancel it, reschedule</li>
<li>if none, schedule a new one</li>
</ol>
<pre><code class="lang-javascript"><span class="hljs-comment">// as long as the event is triggered, it won&apos;t invoke the function.</span>
_.debounce = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">func, wait, immediate</span>) </span>{
    <span class="hljs-keyword">var</span> timeout, result;

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> context = <span class="hljs-keyword">this</span>, args = <span class="hljs-built_in">arguments</span>;

      <span class="hljs-keyword">var</span> later = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        timeout = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">if</span> (!immediate) {
          result = func.apply(context, args);
        }
      };

      <span class="hljs-keyword">var</span> callNow = immediate &amp;&amp; !timeout;

      clearTimeout(timeout);

      timeout = setTimeout(later, wait);

      <span class="hljs-keyword">if</span> (callNow) {
        result = func.apply(context, args);
      }

      <span class="hljs-keyword">return</span> result;
    };
  };
</code></pre>
<h2 id="how-do-you-make-a-website-faster">How do you make a website faster?</h2>
<ol>
<li>css sprite</li>
<li>load pictures only when needed</li>
<li>load javascript files only when needed - use <code>&lt;script src=&quot;path/to/script&quot; async /&gt;</code></li>
<li>Optimize CSS and JS files. Enable compression: minify front end files, combine multiple front end files into one</li>
<li>use CDN</li>
<li>check if you put unused code into the page, or JS CSS files.</li>
<li>eliminate HTTP requests</li>
<li>make images internet-friendly</li>
</ol>
<p>HTTP/2 may also help. However, be extremely cautions to mention it, because your interviewer may not know about HTTP/2&apos;s new feature. Don&apos;t get into trouble!</p>
<ol>
<li>use HTTP/2 to have multiple connection. Front end files will be downloaded in parallel.</li>
<li>HTTP/2 server push - it allows a web server to send resources to a browser before the browser gets to request them</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            

        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Performance","level":"4.2","depth":1,"next":{"title":"Front-end","level":"6.1","depth":1,"path":"system_design/system-design-frontend.md","ref":"system_design/system-design-frontend.md","articles":[]},"previous":{"title":"Rendering","level":"4.1","depth":1,"path":"web/rendering.md","ref":"web/rendering.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["theme-api"],"pluginsConfig":{"theme-api":{"languages":[],"split":true,"theme":"dark"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"web/performance.md","mtime":"2017-05-09T20:09:45.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-05-16T04:43:27.088Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-api/theme-api.js"></script>
        
    

    </body>
</html>

